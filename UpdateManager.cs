using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.SceneManagement;

public static class UpdateManager
{
  private static Dictionary<string,UpdateState> StateList = new Dictionary<string,UpdateState>();
  private static UpdateState UpdateState;
  private static bool StartTrigger = true;
  private static bool UpdateTrigger = true;

  static UpdateManager(){
    UpdateState Mainstate = new StateMain();
    StateList.Add("Main",Mainstate);
    UpdateState Firststate = new StateFirst();
    StateList.Add("First",Firststate);
    UpdateState Menustate = new StateMenu();
    StateList.Add("Menu",Menustate);
    UpdateState MapMoveState = new StateMapMove();
    StateList.Add("MapMove",MapMoveState);
    UpdateState EndState = new StateEnd();
    StateList.Add("End",EndState);
    UpdateState LoadState = new StateLoad();
    StateList.Add("Load",LoadState);
    UpdateState SetUpState = new StateSetUp();
    StateList.Add("SetUp",SetUpState);

    UpdateState = StateList["First"];
    Debug.Log("NextState:"+UpdateState);
    UpdateState.Start();
  }
  public static void StateSet(string state){
    UpdateState.End();
    UpdateState = StateList[state];
    if(StartTrigger){
      UpdateState.Start();
    }
  }
  public static void StartOn(){
    StartTrigger = true;
    UpdateState.Start();
    UpdateTrigger = true;
  }
  public static void StartOff(){
    StartTrigger = false;
  }
  public static void UpdateOn(){
    UpdateTrigger = true;
  }
  public static void UpdateOff(){
    UpdateTrigger = false;
  }
  public static void StateUpdate(){
    if(UpdateTrigger){
      UpdateState.Update();
    }
  }

}
